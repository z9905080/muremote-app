# MuRemote é–‹ç™¼é€²åº¦

## ç¬¬åä¸‰æ¬¡å›å ± - 22:49 (å°åŒ—æ™‚é–“ CST)

### ç•¶å‰æ™‚é–“
- **å°åŒ—æ™‚é–“**: 2026-02-27 22:49:13 CST (UTC+8)
- **ç¶²è·¯æ™‚é–“**: å·²åŒæ­¥ âœ…

---

### é–‹ç™¼ç‹€æ…‹

å°ˆæ¡ˆç›®å‰è™•æ–¼ **Phase 2 åŸå‹é–‹ç™¼** éšæ®µï¼Œæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å¯¦ç¾ï¼š

#### å·²å®ŒæˆåŠŸèƒ½ âœ…
- å°ˆæ¡ˆæ¶æ§‹å»ºç«‹ (Flutter + Electron)
- ADB é€£ç·šèˆ‡è¨­å‚™ç®¡ç†
- è¢å¹•ä¸²æµ (scrcpy / FFmpeg)
- è§¸æ§æ˜ å°„èˆ‡æ§åˆ¶
- ç•«è³ª/å¹€ç‡èª¿æ•´ (480p/720p/1080p, 24/30/60fps)
- æˆªåœ–åŠŸèƒ½
- éµç›¤è¼¸å…¥æ”¯æ´
- WebRTC è¨Šè™Ÿä¼ºæœå™¨
- mDNS è¨­å‚™è‡ªå‹•ç™¼ç¾
- ä¼ºæœå™¨ URL è‡ªè¨‚è¨­å®š

#### å¾…æ¸¬è©¦é …ç›® ğŸš§
- ç«¯å°ç«¯é€£ç·šæ¸¬è©¦ (éœ€è¦å¯¦éš› MuMu ç’°å¢ƒ)
- å¤šé»è§¸æ§æ”¯æ´
- é€£ç·šç‹€æ…‹é¡¯ç¤ºå„ªåŒ–

---

## ç¬¬åä¸€æ¬¡å›å ± - 22:18 (å°åŒ—æ™‚é–“ CST)

### ç•¶å‰æ™‚é–“
- **å°åŒ—æ™‚é–“**: 2026-02-27 22:18:52 CST (UTC+8)
- **ç¶²è·¯æ™‚é–“**: å·²åŒæ­¥ âœ…

---

### é€™æ®µæ™‚é–“å®Œæˆ

#### ä»£ç¢¼ä¿®æ­£
- [x] streaming_service.dart - ä¿®å¾© `_fps` è®Šæ•¸é‡è¤‡å®£å‘Šå•é¡Œ
- [x] streamer.js - ä¿®å¾©æˆªåœ–å‡½æ•¸ï¼Œä½¿ç”¨ adbClient æ›¿ä»£ exec
- [x] main.js - æ–°å¢ `set-fps` è¨Šæ¯è™•ç†
- [x] streamer.js - æ–°å¢ `setFps()` æ–¹æ³•å’Œ 480p æ”¯æ´

#### åŠŸèƒ½æ–°å¢
- [x] streaming_service.dart - æ–°å¢ `setServerUrl()` æ–¹æ³•
- [x] settings_screen.dart - æ–°å¢ä¼ºæœå™¨ä½å€ç·¨è¼¯åŠŸèƒ½
- [x] 480p ç•«è³ªæ”¯æ´ (ç¯€çœæµé‡)
- [x] æˆªåœ–åŠŸèƒ½ç©©å®šæ€§æå‡

---

## å°ˆæ¡ˆæ¶æ§‹

```
MuRemote/
â”œâ”€â”€ mobile/                    # Flutter æ‰‹æ©Ÿ App
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ screens/           # 4 å€‹ç•«é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ connection_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ streaming_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ settings_screen.dart
â”‚   â”‚   â”œâ”€â”€ services/          # æ ¸å¿ƒæœå‹™
â”‚   â”‚   â”‚   â”œâ”€â”€ streaming_service.dart   # WebSocket ä¸²æµ
â”‚   â”‚   â”‚   â”œâ”€â”€ discovery_service.dart   # mDNS ç™¼ç¾
â”‚   â”‚   â”‚   â”œâ”€â”€ webrtc_service.dart      # WebRTC
â”‚   â”‚   â”‚   â””â”€â”€ auth_service.dart         # èªè­‰
â”‚   â”‚   â””â”€â”€ main.dart
â”‚   â””â”€â”€ pubspec.yaml
â”‚
â””â”€â”€ pc/                        # Electron PC Client
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ main/              # ä¸»ç¨‹åº
    â”‚   â”‚   â”œâ”€â”€ main.js              # å…¥å£é»
    â”‚   â”‚   â”œâ”€â”€ streamer.js          # è¢å¹•ä¸²æµ
    â”‚   â”‚   â”œâ”€â”€ touch_handler.js     # è§¸æ§è™•ç†
    â”‚   â”‚   â”œâ”€â”€ device_manager.js    # ADB è¨­å‚™ç®¡ç†
    â”‚   â”‚   â”œâ”€â”€ mdns_advertiser.js    # mDNS æœå‹™å»£æ’­
    â”‚   â”‚   â”œâ”€â”€ screen_capture.js    # è¢å¹•æ“·å–
    â”‚   â”‚   â”œâ”€â”€ keyboard_handler.js  # éµç›¤è™•ç†
    â”‚   â”‚   â”œâ”€â”€ multi_touch_handler.js # å¤šé»è§¸æ§
    â”‚   â”‚   â””â”€â”€ signaling_server.js  # WebRTC è¨Šè™Ÿä¼ºæœå™¨
    â”‚   â”œâ”€â”€ preload/
    â”‚   â””â”€â”€ renderer/
    â””â”€â”€ package.json
```

---

## åŠŸèƒ½ç‹€æ…‹ç¸½è¦½

### å·²å¯¦ç¾ âœ…
| åŠŸèƒ½ | èªªæ˜ | ç‹€æ…‹ |
|------|------|------|
| é ç«¯é€£ç·š | æ‰‹æ©Ÿ â†’ é›»è…¦ MuMu æ¨¡æ“¬å™¨é€£ç·š | âœ… |
| è¢å¹•ä¸²æµ | é›»è…¦ç•«é¢å‚³è¼¸åˆ°æ‰‹æ©Ÿ (scrcpy/FFmpeg) | âœ… |
| è§¸æ§æ˜ å°„ | è§¸æ§æ“ä½œè½‰æ›ç‚ºæ»‘é¼ é»æ“Š/æ»‘å‹• | âœ… |
| ç•«è³ªèª¿æ•´ | 480p / 720p / 1080p é¸æ“‡ | âœ… |
| å¹€ç‡èª¿æ•´ | 24 / 30 / 60 fps æ”¯æ´ | âœ… |
| é€£ç·šç‹€æ…‹æŒ‡ç¤º | é¡¯ç¤ºå»¶é²ã€å¹€ç‡ | âœ… |
| æˆªåœ–åŠŸèƒ½ | å³æ™‚æˆªåœ– | âœ… |
| éµç›¤è¼¸å…¥ | è™›æ“¬éµç›¤ + å¿«æ·éµ | âœ… |
| è‡ªå‹•ç™¼ç¾ | mDNS/Bonjour è¨­å‚™æœå°‹ | âœ… |
| ä¼ºæœå™¨è¨­å®š | å¯è‡ªè¨‚ä¼ºæœå™¨ä½å€ | âœ… |

### å¾…å®Œæˆ ğŸš§
| åŠŸèƒ½ | èªªæ˜ | ç‹€æ…‹ |
|------|------|------|
| ç«¯å°ç«¯é€£ç·šæ¸¬è©¦ | å¯¦éš› MuMu ç’°å¢ƒæ¸¬è©¦ | ğŸš§ |
| å¤šé»è§¸æ§æ”¯æ´ | è¤‡é›œæ‰‹å‹¢æ“ä½œ | ğŸš§ |
| é€£ç·šç‹€æ…‹é¡¯ç¤ºå„ªåŒ– | æ›´å¥½çš„éŒ¯èª¤è™•ç† | ğŸš§ |

### æœªä¾†è¦åŠƒ ğŸ“‹
| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| å¤šé–‹åŒæ­¥æ§åˆ¶ | åŒæ™‚æ§åˆ¶å¤šå€‹æ¨¡æ“¬å™¨ |
| 4K ç•«è³ª | é«˜ç•«è³ªå‚³è¼¸ |
| è™›æ“¬éµç›¤ | å®Œæ•´éµç›¤æ˜ å°„ |

---

## é€šè¨Šå”è­°

### æ‰‹æ©Ÿ â†’ PC è¨Šæ¯
```json
{ "type": "touch", "action": "down", "x": 0.5, "y": 0.5 }
{ "type": "touch", "action": "move", "x": 0.6, "y": 0.6 }
{ "type": "touch", "action": "up" }
{ "type": "key", "key": "BACK" }
{ "type": "text", "text": "hello" }
{ "type": "set-quality", "quality": "720p" }
{ "type": "set-fps", "fps": 30 }
{ "type": "screenshot" }
```

### PC â†’ æ‰‹æ©Ÿè¨Šæ¯
```json
{ "type": "stream-start", "width": 1280, "height": 720 }
{ "type": "stream-frame", "data": "<jpeg-bytes>" }
{ "type": "stats", "fps": 30, "latency": 50 }
{ "type": "screenshot-data", "data": "<jpeg-bytes>" }
```

---

## æŠ€è¡“æ¶æ§‹

### ä¸²æµæ¶æ§‹
```
æ–¹æ¡ˆ1 (é¦–é¸): MuMu â†’ scrcpy â†’ æ‰‹æ©Ÿ (æœ€ä½å»¶é²)
æ–¹æ¡ˆ2 (å‚™ç”¨): MuMu â†’ ADB screenrecord â†’ FFmpeg (MJPEG) â†’ æ‰‹æ©Ÿ
```

### æ•¸æ“šæµ
```
è§¸æ§æ•¸æ“šæµ:
æ‰‹æ©Ÿè§¸æ§ (0-1 åº§æ¨™)
    â†“ WebSocket JSON
PC TouchHandler
    â†“ è½‰æ›ç‚ºå¯¦éš›åº§æ¨™
ADB input event
    â†“
MuMu æ¨¡æ“¬å™¨
```

---

## ä¸‹ä¸€æ­¥å„ªå…ˆé †åº

### P0 - å¿…é ˆå®Œæˆ
1. [ ] å¯¦éš›ç’°å¢ƒæ¸¬è©¦ (éœ€è¦ MuMu æ¨¡æ“¬å™¨)
2. [ ] ç«¯å°ç«¯é€£ç·šæ¸¬è©¦

### P1 - é‡è¦
3. [ ] é€£ç·šç‹€æ…‹é¡¯ç¤ºå„ªåŒ–
4. [ ] å¤šé»è§¸æ§æ”¯æ´

### P2 - æœªä¾†è¦åŠƒ
5. [ ] å¤šé–‹åŒæ­¥æ§åˆ¶
6. [ ] æ©«å±éŠæˆ²æ”¯æ´

---

## æ­·å²ç‰ˆæœ¬

- ç¬¬åå›å ± (21:50) - ä¿®å¾©è®Šæ•¸å•é¡Œï¼Œæ–°å¢ä¼ºæœå™¨ URL è¨­å®š
- ç¬¬ä¹å›å ± (21:33) - å®Œæˆç•«è³ª/å¹€ç‡/æˆªåœ–åŠŸèƒ½
- ç¬¬å…«å›å ± (21:18) - å®ŒæˆåŸºç¤ä¸²æµæ¨¡çµ„
- ç¬¬å…­å›å ± (12:59) - å®ŒæˆåŸºç¤ä¸²æµæ¨¡çµ„
- ç¬¬äº”å›å ± (11:33) - è¢å¹•æ“·å–æ¨¡çµ„ âœ…, ä¸²æµå‚³è¼¸ä¼ºæœå™¨ âœ…
